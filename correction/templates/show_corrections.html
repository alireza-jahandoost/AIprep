{% extends "layouts/base.html" %}
{% load static %}

{% block title %} Settings {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <main class="content">

        {% include 'includes/navigation.html' %}

            <div class="row">
                <div class="col-12">
                    <div class="card card-body bg-white border-light shadow-sm mb-4 min-vh-100 d-flex flex-column justify-content-between">
                        <div class="table-responsive">
                  <table class="table table-centered table-nowrap mb-0 rounded text-center">
                      <thead class="thead-light">
                          <tr>
                              <th class="border-0">#</th>
                              <th class="border-0">Exam Type</th>
                              <th class="border-0">Exam Name</th>
                              <th class="border-0">Exam Number</th>
                              <th class="border-0">Status</th>
                              <th class="border-0">Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          <!-- Item -->
                          {% if number_of_corrections == 0 %}
                              <tr>
                              <td colspan="6" class="text-center">There is no correction</td>
                              </tr>
                          {% else %}
                              {% for correction in corrections_object.object_list %}
                              <tr>
                                  <td class="border-0"><a href="#" class="text-primary font-weight-bold">{{ forloop.counter }}</a> </td>
                                  <td class="border-0 font-weight-bold">
                                      {{ correction.question_type_data.get_exam_type_display }}
                                  </td>
                                  <td class="border-0">
                                      {{ correction.question_type_data.get_exam_db_name_display }}
                                  </td>
                                  <td class="border-0">
                                      {{ correction.question_type_data.exam_db_number }}
                                  </td>
                                  <td class="border-0">
                                      {% if correction.get_status_display == "Pending" %}
                                      <span class="text-warning font-weight-bold">Pending</span>
                                      {% elif correction.get_status_display == "Invalid" %}
                                      <span class="text-danger font-weight-bold">Invalid</span>
                                      {% elif correction.get_status_display == "Corrected" %}
                                      <span class="text-success font-weight-bold">Corrected</span>
                                      {% endif %}
                                  </td>
                                  <td class="border-0">
    {#                                  {% if correction.get_status_display == "Corrected" %}#}
                                      <a href="{% url 'show_correction' correction_id=correction.id %}">
                                          <span class="fas fa-eye fa-lg text-info" title="Show Correction"></span>
                                      </a>
                                      {% if correction.get_status_display == 'Corrected' %}
                                          <a href="{% url 'download_report' correction_id=correction.id %}">
                                            <span class="fas fa-download fa-lg text-info" title="Download Report"></span>
                                          </a>
                                      {% else %}
                                            <span class="fas fa-download fa-lg text-muted" title="Download Report"></span>
                                      {% endif %}
    {#                                  {% endif %}#}
                                  </td>
                              </tr>
                              <!-- End of Item -->
                              {% endfor %}
                        {% endif %}

                      </tbody>
                  </table>
              </div>
                <div class="d-flex justify-content-center pb-5">
                    <nav aria-label="pagination of corrections">
                      <ul class="pagination">
                        <li class="page-item{% if not corrections_object.has_previous %} disabled{% endif %}">
                          <a class="page-link" href="{%if corrections_object.has_previous%}{% url "show_corrections" %}?page={{ corrections_object.previous_page_number }}{% else %}#{% endif %}" tabindex="-1">Previous</a>
                        </li>
                        {% for page in page_range %}
                            <li class="page-item{% if page == current_page %} bg-primary{% endif %}"><a class="page-link" href="{% url "show_corrections" %}?page={{ page }}">1</a></li>
                        {% endfor %}
                        <li class="page-item{% if not corrections_object.has_next %} disabled{% endif %}">
                          <a class="page-link" href=href="{%if corrections_object.has_next%}{% url "show_corrections" %}?page={{ corrections_object.next_page_number }}{% else %}#{% endif %}">Next</a>
                        </li>
                      </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    {% include 'includes/footer.html' %}

    </main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
